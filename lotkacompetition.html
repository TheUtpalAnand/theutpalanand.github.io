<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lotka-Volterra Competition Model</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        header {
            text-align: center;
            margin: 20px;
        }
        .input-container {
            text-align: center;
            margin: 20px;
        }
        #plot {
            width: 100%;
            height: 600px;
        }
    </style>
</head>
<body>
    <header>
        <h1>TheUtpalAnand</h1>
        <h2>Lotka-Volterra Competition Model</h2>
    </header>

    <div class="input-container">
        <label for="N1">Initial Population of Species 1 (N1):</label>
        <input type="number" id="N1" value="70"><br><br>
        <label for="N2">Initial Population of Species 2 (N2):</label>
        <input type="number" id="N2" value="175"><br><br>
        
        <label for="r1">Growth Rate of Species 1 (r1):</label>
        <input type="number" id="r1" value="1"><br><br>
        <label for="K1">Carrying Capacity of Species 1 (K1):</label>
        <input type="number" id="K1" value="200"><br><br>
        
        <label for="r2">Growth Rate of Species 2 (r2):</label>
        <input type="number" id="r2" value="0.5"><br><br>
        <label for="K2">Carrying Capacity of Species 2 (K2):</label>
        <input type="number" id="K2" value="300"><br><br>
        
        <label for="a12">Effect of Species 2 on Species 1 (α12):</label>
        <input type="number" id="a12" value="0.8"><br><br>
        <label for="a21">Effect of Species 1 on Species 2 (α21):</label>
        <input type="number" id="a21" value="2"><br><br>

        <button onclick="generatePlot()">Generate Graph</button>
    </div>

    <div id="plot"></div>

    <script>
        function lotkaVolterra(t, z, params) {
            const [N1, N2] = z;
            const [r1, K1, a12, r2, K2, a21] = params;
            const dN1dt = r1 * N1 * (K1 - N1 - (a12 * N2)) / K1;
            const dN2dt = r2 * N2 * (K2 - N2 - (a21 * N1)) / K2;
            return [dN1dt, dN2dt];
        }

        function generatePlot() {
            const initial_N1 = parseFloat(document.getElementById("N1").value);
            const initial_N2 = parseFloat(document.getElementById("N2").value);
            const r1 = parseFloat(document.getElementById("r1").value);
            const K1 = parseFloat(document.getElementById("K1").value);
            const r2 = parseFloat(document.getElementById("r2").value);
            const K2 = parseFloat(document.getElementById("K2").value);
            const a12 = parseFloat(document.getElementById("a12").value);
            const a21 = parseFloat(document.getElementById("a21").value);

            const tSpan = [0, 100];
            const tEval = Array.from({length: 500}, (_, i) => i * 0.2);
            const params = [r1, K1, a12, r2, K2, a21];

            // Trajectory data
            let trajectoryN1 = [initial_N1];
            let trajectoryN2 = [initial_N2];

            for (let t = 0; t < tEval.length - 1; t++) {
                const z = lotkaVolterra(t, [trajectoryN1[t], trajectoryN2[t]], params);
                trajectoryN1.push(trajectoryN1[t] + z[0] * (tEval[t + 1] - tEval[t]));
                trajectoryN2.push(trajectoryN2[t] + z[1] * (tEval[t + 1] - tEval[t]));
            }

            // Vector field data
            const x = Array.from({length: 35}, (_, i) => i * 5 + 10);
            const y = Array.from({length: 60}, (_, i) => i * 5 + 10);
            const quiverU = [];
            const quiverV = [];

            for (let i = 0; i < x.length; i++) {
                for (let j = 0; j < y.length; j++) {
                    const N1 = x[i];
                    const N2 = y[j];
                    const derivatives = lotkaVolterra(0, [N1, N2], params);
                    quiverU.push(derivatives[0]);
                    quiverV.push(derivatives[1]);
                }
            }

            const trace1 = {
                x: trajectoryN1,
                y: trajectoryN2,
                mode: 'lines',
                name: 'Trajectory',
                line: {color: 'red'}
            };

            const trace2 = {
                x: x,
                y: y,
                mode: 'markers',
                type: 'scatter',
                marker: {
                    size: 5,
                    color: 'blue',
                    opacity: 0.5
                },
                name: 'Nullclines'
            };

            const layout = {
                title: 'Lotka-Volterra Competition Model',
                xaxis: { title: 'Population of Species 1 (N1)' },
                yaxis: { title: 'Population of Species 2 (N2)' },
                showlegend: true
            };

            const data = [trace1, trace2];
            Plotly.newPlot('plot', data, layout);
        }
    </script>
</body>
</html>
